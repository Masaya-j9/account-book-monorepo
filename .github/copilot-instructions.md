# GitHub Copilot Instructions

## 言語設定

- すべてのレビューコメントとフィードバックは**日本語**で記述してください
- コードコメントの提案も日本語で行ってください
- 技術用語は適切に日本語化し、必要に応じて英語表記を併記してください

## Pull Request 作成時の言語

- copilot-agent によって pull request を生成する場合、タイトル・説明・変更点・テスト結果などすべて日本語で記述してください。
- 体裁は普通のチーム向け PR と同じにして、要点がすぐに分かる構成（目的/変更/テスト/注意点）にして、英語を使う場面があれば括弧付きで補足してください。

## レビュー方針

### コード品質

- TypeScript/JavaScript のベストプラクティスに従っているか確認
- 型安全性が確保されているか確認
- エラーハンドリングが適切に実装されているか確認
- 未使用の変数やインポートがないか確認

### パフォーマンス

- 不要な再レンダリングがないか（React）
- 非効率なループや処理がないか
- メモリリークの可能性がないか

### セキュリティ

- 機密情報のハードコーディングがないか
- SQL インジェクションや XSS の脆弱性がないか
- 適切な認証・認可が実装されているか

### テスト

- 新機能に対するテストケースが追加されているか
- エッジケースのテストが含まれているか
- テストカバレッジが適切か

#### テスト記述ルール

- Vitest の `describe` / `it` の説明文は日本語で記述する（例: "〜できる", "〜の場合は例外になる"）
- テストは原則として `describe("正常系")` / `describe("異常系")` を挟み、意図が分かるように分類する

### ドキュメント

- 複雑なロジックにコメントが付いているか
- 公開 API やコンポーネントにドキュメントがあるか
- README の更新が必要な場合は指摘

## プロジェクト固有のルール

### Monorepo 構成

- `apps/frontend`: Next.js 15 + React 19
- `apps/backend`: Hono + TypeScript
- `packages/shared`: 共有型定義とユーティリティ

### コーディング規約

- Biome を使用した Lint と Format
- Vitest を使用したテスト
- Turborepo を使用したビルド管理

### 追加ルール

- 原則として `for` / `for...of` / `for...in` は使用しない（コレクション操作や `reduce` などで表現する）
- 原則として `unknown` を型注釈として使用しない（必要ならジェネリクス + 型ガードで吸収する）
- router（プレゼンテーション層）にバリデーションロジック（条件分岐やメッセージ判定）を書かない
- 入出力のバリデーションは `packages/shared` の Zod スキーマ（`.input(...)` / `.output(...)`）に責務を寄せる
- ビジネスロジックの失敗はユースケースで表現し、Result 型（Effect/TaggedError などの型付きエラー）として返す／throw する

### 命名規則

- コンポーネント: PascalCase（例: `UserProfile.tsx`）
- 関数・変数: camelCase（例: `getUserData`）
- 定数: UPPER_SNAKE_CASE（例: `MAX_RETRY_COUNT`）
- ファイル名: kebab-case または PascalCase（コンポーネントのみ）

## レビュー時の注意点

### 建設的なフィードバック

- 問題点を指摘するだけでなく、改善案も提示してください
- 重要度（Critical / Major / Minor）を明示してください
- 可能であればコード例を提示してください

### ポジティブなフィードバック

- 良い実装や改善点についても積極的にコメントしてください
- チームの学習と成長を促進するフィードバックを心がけてください

## 例外ケース

- WIP（Work In Progress）の PR には詳細なレビューは不要
- 自動生成されたファイル（`package-lock.json`など）は基本的にスキップ
- ドキュメントのみの変更は内容の正確性と分かりやすさを重視
